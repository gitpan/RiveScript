<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>DateTime.rsp - Package for returning a formatted timestamp.</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#usage">USAGE</a></li>
	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#source">SOURCE</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>DateTime.rsp - Package for returning a formatted timestamp.</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>This package exports <strong>datetime</strong>, an object for returning a time stamp.</p>
<p>
</p>
<hr />
<h1><a name="usage">USAGE</a></h1>
<pre>
  &amp;datetime(STRING)</pre>
<p><strong>Example:</strong></p>
<pre>
  + time
  - It is currently &amp;datetime(Weekday, Month D Year @ h:mm:ss AM)</pre>
<p>The <strong>STRING</strong> is a timestamp string. The keywords are:</p>
<pre>
  Month   = Full month name  (&quot;January..December&quot;)
  Mon     = Abbr. month name (&quot;Jan..Dec&quot;)
  MNum    = Month of Year    (&quot;1..12&quot;)
  Weekday = Day of Week      (&quot;Sunday..Saturday&quot;)
  Day     = Abbr. Weekday    (&quot;Sun..Sat&quot;)
  D       = Day of Month     (&quot;1..31&quot;)
  DD      = Padded Day       (&quot;01..31&quot;)
  Year    = Full Year        (&quot;2006&quot;)
  YYYY    = 4-Digit Year     (&quot;2006&quot;)
  YY      = 2-Digit Year     (&quot;06&quot;)
  HM      = Military Hours   (&quot;0..23&quot;)
  HHM     = Padded Mil. Hours(&quot;00..23&quot;)
  H       = Hour             (&quot;1..12&quot;)
  HH      = Padded Hour      (&quot;01..12&quot;)
  M       = Minutes          (&quot;0..59&quot;)
  MM      = Padded Minutes   (&quot;00..59&quot;)
  S       = Seconds          (&quot;0..59&quot;)
  SS      = Padded Seconds   (&quot;00..59&quot;)
  AM      = AM or PM         (&quot;AM..PM&quot;)</pre>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<pre>
  Casey Kirsle &lt;casey at cuvou.net&gt;
  Created: 4:42 PM 4/4/2006
  Updated: 4:42 PM 4/4/2006</pre>
<p>
</p>
<hr />
<h1><a name="source">SOURCE</a></h1>
<pre>
  /*
  ######################################################
  ## RiveScript Package                               ##
  ##--------------------------------------------------##
  ## DateTime.rsp -- Objects for returning formatted  ##
  ## Date and Time strings.                           ##
  ##--------------------------------------------------##
  ## Author: Casey Kirsle &lt;casey at cuvou.net&gt;        ##
  ## Created: 4:42 PM 4/4/2006                        ##
  ## Updated: 4:42 PM 4/4/2006                        ##
  ##--------------------------------------------------##
  ## Usage:                                           ##
  ##   &amp;datetime(STRING)                              ##
  ##                                                  ##
  ##   Month   = Full month name (&quot;January&quot;)          ##
  ##   Mon     = Abbrev. Month Name (&quot;Jan&quot;)           ##
  ##   MNum    = Month of Year (&quot;1..12&quot;)              ##
  ##   Weekday = Full day of the week (&quot;Monday&quot;)      ##
  ##   Day     = Abbrev. Day Name (&quot;Mon&quot;)             ##
  ##   D       = Day of Month (&quot;1..31&quot;)               ##
  ##   DD      = Padded Day of Month (&quot;01..31&quot;)       ##
  ##   Year    = Full Year (&quot;2006&quot;)                   ##
  ##   YYYY    = 4-Digit Year (&quot;2006&quot;)                ##
  ##   YY      = 2-Digit Year (&quot;06&quot;)                  ##
  ##   HM      = Military Hour (&quot;0..23&quot;)              ##
  ##   HHM     = Padded Military Hour (&quot;00..23&quot;)      ##
  ##   H       = Hour (&quot;1..12&quot;)                       ##
  ##   HH      = Padded Hour (&quot;01..12&quot;)               ##
  ##   AM      = AM or PM (&quot;AM..PM&quot;)                  ##
  ##   M       = Minutes (&quot;0..59&quot;)                    ##
  ##   MM      = Padded Minutes (&quot;00..59&quot;)            ##
  ##   S       = Seconds (&quot;0..59&quot;)                    ##
  ##   SS      = Padded Seconds (&quot;00..59&quot;)            ##
  ######################################################
  */</pre>
<pre>
  <span class="operator">&gt;</span> <span class="variable">object</span> <span class="variable">datetime</span>
    <span class="keyword">my</span> <span class="operator">(</span><span class="variable">$method</span><span class="operator">,</span><span class="variable">$string</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
</pre>
<pre>
    <span class="comment"># Arrays.</span>
    <span class="keyword">my</span> <span class="variable">@monthnames</span> <span class="operator">=</span> <span class="string">qw(January February March April May June July
        August September October November December)</span><span class="operator">;</span>
    <span class="keyword">my</span> <span class="variable">@monthabbrev</span> <span class="operator">=</span> <span class="string">qw(Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec)</span><span class="operator">;</span>
    <span class="keyword">my</span> <span class="variable">@daynames</span> <span class="operator">=</span> <span class="string">qw(Sunday Monday Tuesday Wednesday Thursday Friday Saturday)</span><span class="operator">;</span>
    <span class="keyword">my</span> <span class="variable">@dayabbrev</span> <span class="operator">=</span> <span class="string">qw(Sun Mon Tue Wed Thu Fri Sat)</span><span class="operator">;</span>
</pre>
<pre>
    <span class="comment"># Hash to hold temporary details.</span>
    <span class="keyword">my</span> <span class="variable">%data</span> <span class="operator">=</span> <span class="operator">();</span>
</pre>
<pre>
    <span class="comment"># Get the timestamp.</span>
    <span class="keyword">my</span> <span class="operator">(</span><span class="variable">$sec</span><span class="operator">,</span><span class="variable">$min</span><span class="operator">,</span><span class="variable">$hour</span><span class="operator">,</span><span class="variable">$mday</span><span class="operator">,</span><span class="variable">$mon</span><span class="operator">,</span><span class="variable">$year</span><span class="operator">,</span><span class="variable">$wday</span><span class="operator">,</span><span class="variable">$yday</span><span class="operator">,</span><span class="variable">$isdst</span><span class="operator">)</span> <span class="operator">=</span> <span class="keyword">localtime</span><span class="operator">(</span><span class="keyword">time</span><span class="operator">());</span>
    <span class="variable">$year</span> <span class="operator">+=</span> <span class="number">1900</span><span class="operator">;</span>
</pre>
<pre>
    <span class="comment"># Get the month name.</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">month</span><span class="operator">}</span> <span class="operator">=</span> <span class="variable">$monthnames</span> <span class="operator">[</span> <span class="variable">$mon</span> <span class="operator">]</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">mon</span><span class="operator">}</span>   <span class="operator">=</span> <span class="variable">$monthabbrev</span> <span class="operator">[</span> <span class="variable">$mon</span> <span class="operator">]</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">mnum</span><span class="operator">}</span>  <span class="operator">=</span> <span class="variable">$mon</span> <span class="operator">+</span> <span class="number">1</span><span class="operator">;</span>
</pre>
<pre>
    <span class="comment"># Get the day name.</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">weekday</span><span class="operator">}</span> <span class="operator">=</span> <span class="variable">$daynames</span> <span class="operator">[</span> <span class="variable">$wday</span> <span class="operator">]</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">day</span><span class="operator">}</span>     <span class="operator">=</span> <span class="variable">$dayabbrev</span> <span class="operator">[</span> <span class="variable">$wday</span> <span class="operator">]</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">d</span><span class="operator">}</span>       <span class="operator">=</span> <span class="variable">$mday</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">dd</span><span class="operator">}</span>      <span class="operator">=</span> <span class="variable">$mday</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">dd</span><span class="operator">}</span>      <span class="operator">=</span> <span class="string">'0'</span> <span class="operator">.</span> <span class="variable">$data</span><span class="operator">{</span><span class="string">dd</span><span class="operator">}</span> <span class="keyword">until</span> <span class="keyword">length</span> <span class="variable">$data</span><span class="operator">{</span><span class="string">dd</span><span class="operator">}</span> <span class="operator">==</span> <span class="number">2</span><span class="operator">;</span>
</pre>
<pre>
    <span class="comment"># Format the years.</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">year</span><span class="operator">}</span>    <span class="operator">=</span> <span class="variable">$year</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">yyyy</span><span class="operator">}</span>    <span class="operator">=</span> <span class="variable">$year</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">yy</span><span class="operator">}</span>      <span class="operator">=</span> <span class="keyword">substr</span><span class="operator">(</span><span class="variable">$data</span><span class="operator">{</span><span class="string">yyyy</span><span class="operator">}</span><span class="operator">,</span><span class="number">2</span><span class="operator">,</span><span class="number">3</span><span class="operator">);</span>
</pre>
<pre>
    <span class="comment"># Format the hours.</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">hm</span><span class="operator">}</span>      <span class="operator">=</span> <span class="variable">$hour</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">hhm</span><span class="operator">}</span>     <span class="operator">=</span> <span class="variable">$hour</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">hhm</span><span class="operator">}</span>     <span class="operator">=</span> <span class="string">'0'</span> <span class="operator">.</span> <span class="variable">$data</span><span class="operator">{</span><span class="string">hhm</span><span class="operator">}</span> <span class="keyword">until</span> <span class="keyword">length</span> <span class="variable">$data</span><span class="operator">{</span><span class="string">hhm</span><span class="operator">}</span> <span class="operator">==</span> <span class="number">2</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">h</span><span class="operator">}</span>       <span class="operator">=</span> <span class="variable">$hour</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">hh</span><span class="operator">}</span>      <span class="operator">=</span> <span class="number">0</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">am</span><span class="operator">}</span>      <span class="operator">=</span> <span class="string">'AM'</span><span class="operator">;</span>
    <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$data</span><span class="operator">{</span><span class="string">h</span><span class="operator">}</span> <span class="operator">&gt;</span> <span class="number">12</span><span class="operator">)</span> <span class="operator">{</span>
        <span class="variable">$data</span><span class="operator">{</span><span class="string">h</span><span class="operator">}</span> <span class="operator">-=</span> <span class="number">12</span><span class="operator">;</span>
        <span class="variable">$data</span><span class="operator">{</span><span class="string">am</span><span class="operator">}</span> <span class="operator">=</span> <span class="string">'PM'</span><span class="operator">;</span>
        <span class="variable">$data</span><span class="operator">{</span><span class="string">h</span><span class="operator">}</span>  <span class="operator">=</span> <span class="number">12</span> <span class="keyword">if</span> <span class="variable">$data</span><span class="operator">{</span><span class="string">h</span><span class="operator">}</span> <span class="operator">==</span> <span class="number">0</span><span class="operator">;</span>
    <span class="operator">}</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">hh</span><span class="operator">}</span>      <span class="operator">=</span> <span class="variable">$data</span><span class="operator">{</span><span class="string">h</span><span class="operator">}</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">hh</span><span class="operator">}</span>      <span class="operator">=</span> <span class="string">'0'</span> <span class="operator">.</span> <span class="variable">$data</span><span class="operator">{</span><span class="string">hh</span><span class="operator">}</span> <span class="keyword">until</span> <span class="keyword">length</span> <span class="variable">$data</span><span class="operator">{</span><span class="string">hh</span><span class="operator">}</span> <span class="operator">==</span> <span class="number">2</span><span class="operator">;</span>
</pre>
<pre>
    <span class="comment"># Format the minutes.</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">m</span><span class="operator">}</span>       <span class="operator">=</span> <span class="variable">$min</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">mm</span><span class="operator">}</span>      <span class="operator">=</span> <span class="variable">$min</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">mm</span><span class="operator">}</span>      <span class="operator">=</span> <span class="string">'0'</span> <span class="operator">.</span> <span class="variable">$data</span><span class="operator">{</span><span class="string">mm</span><span class="operator">}</span> <span class="keyword">until</span> <span class="keyword">length</span> <span class="variable">$data</span><span class="operator">{</span><span class="string">mm</span><span class="operator">}</span> <span class="operator">==</span> <span class="number">2</span><span class="operator">;</span>
</pre>
<pre>
    <span class="comment"># Format the seconds.</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">s</span><span class="operator">}</span>       <span class="operator">=</span> <span class="variable">$sec</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">ss</span><span class="operator">}</span>      <span class="operator">=</span> <span class="variable">$sec</span><span class="operator">;</span>
    <span class="variable">$data</span><span class="operator">{</span><span class="string">ss</span><span class="operator">}</span>      <span class="operator">=</span> <span class="string">'0'</span> <span class="operator">.</span> <span class="variable">$data</span><span class="operator">{</span><span class="string">ss</span><span class="operator">}</span> <span class="keyword">until</span> <span class="keyword">length</span> <span class="variable">$data</span><span class="operator">{</span><span class="string">ss</span><span class="operator">}</span> <span class="operator">==</span> <span class="number">2</span><span class="operator">;</span>
</pre>
<pre>
    <span class="comment"># Substitute them in.</span>
    <span class="keyword">my</span> <span class="variable">@keys</span> <span class="operator">=</span> <span class="string">qw(mnum month mon weekday day d dd year yy yyyy hhm hh hm h am mm m ss s)</span><span class="operator">;</span>
    <span class="keyword">foreach</span> <span class="keyword">my</span> <span class="variable">$k</span> <span class="operator">(</span><span class="variable">@keys</span><span class="operator">)</span> <span class="operator">{</span>
        <span class="variable">$string</span> <span class="operator">=~</span> <span class="regex">s/\b$k\b/$data{$k}/ig</span><span class="operator">;</span>
    <span class="operator">}</span>
</pre>
<pre>
    <span class="keyword">return</span> <span class="variable">$string</span><span class="operator">;</span>
      <span class="operator">&lt;</span> <span class="variable">object</span>
</pre>

</body>

</html>
